import{f as E,m as p,r as u,g as M,o as y,T as S,c as $,n as W,p as j,a as n,b as _,q as L,t as N,s as V}from"./DMf1i2K3.js";const R={class:"flex items-center text-slate-100 dark:text-slate-100"},T={class:"text-base font-semibold truncate"},q={class:"p-2 bg-purple-200 text-slate-800 text-sm"},z=E({__name:"DesktopWindow",props:{visible:{type:Boolean,default:!1},title:{default:null},draggable:{type:Boolean,default:!1},initialOffsetX:{default:0},initialOffsetY:{default:0}},emits:["update:visible","close"],setup(f,{emit:k}){const a=f,m=k,o=p({get:()=>a.visible,set:e=>m("update:visible",e)}),i=u(null),r=u(a.initialOffsetX),c=u(a.initialOffsetY),X=p(()=>({transform:`translate(calc(-50% + ${r.value}px), calc(-50% + ${c.value}px))`,left:"50%",top:"50%"}));let d=!1,v=0,b=0;const g=p(()=>a.draggable),Y=e=>{g.value&&(d=!0,v=e.clientX-r.value,b=e.clientY-c.value,window.addEventListener("pointermove",w),window.addEventListener("pointerup",B,{once:!0}))},w=e=>{if(!d||!i.value)return;const t=i.value.getBoundingClientRect(),s=e.clientX-v,l=e.clientY-b,x=(window.innerWidth-t.width)/2,O=-x,h=(window.innerHeight-t.height)/2,C=-h;r.value=Math.min(Math.max(s,O),x),c.value=Math.min(Math.max(l,C),h)},B=()=>{d=!1,window.removeEventListener("pointermove",w)},D=()=>{o.value&&(o.value=!1,m("close"))};return(e,t)=>{const s=L;return y(),M(S,{to:"body"},[o.value?(y(),$("div",{key:0,ref_key:"panel",ref:i,class:"absolute min-w-[320px] max-w-[25vw] p-1 bg-purple-700 border border-purple-800 dark:border-purple-200",style:j(X.value)},[n("div",{class:"flex items-center justify-between gap-2 pb-2 select-none",onPointerdown:t[1]||(t[1]=l=>g.value?Y(l):void 0)},[n("div",R,[_(s,{name:"i-lucide-smile",class:"h-6 w-6 mr-2","aria-hidden":"true"}),n("h3",T,N(f.title),1)]),n("button",{type:"button",class:"inline-flex items-center justify-center w-6 h-6 border-2 bg-purple-700 border-purple-200 border-b-purple-900 border-r-purple-900 text-white active:bg-purple-800 active:border-purple-900 active:border-b-purple-200 active:border-r-purple-200 cursor-pointer","aria-label":"Close",onClick:t[0]||(t[0]=l=>D())},[_(s,{name:"i-lucide-x",class:"h-4 w-4","aria-hidden":"true"})])],32),n("div",q,[V(e.$slots,"default")])],4)):W("",!0)])}}}),I=Object.assign(z,{__name:"DesktopWindow"});export{I as O};
